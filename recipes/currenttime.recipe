#!/usr/bin/env python
# vim:fileencoding=utf-8

from calibre.web.feeds.news import BasicNewsRecipe


class CurrentTime(BasicNewsRecipe):
    title = 'Настоящее время'
    __author__ = 'bugmen00t'
    description = 'Телеканал "Настоящее Время" рассказывает о важных новостях и злободневных темах, предоставляя аудитории то, что не всегда могут обеспечить местные СМИ: новости без цензуры, ответственный обмен мнениями, открытое обсуждение проблем.'  # noqa
    publisher = 'RFE/RL ("Радио Свободная Европа"/"Радио Свобода") при участии VoA ("Голос Америки")'  # noqa
    category = 'newspaper'
    cover_url = 'https://www.currenttime.tv/Content/responsive/RFE/ru-RU-TV/img/top_logo_news.png'
    language = 'ru'
    no_stylesheets = False
    remove_javascript = False
    auto_cleanup = False
    remove_empty_feeds = True
    oldest_article = 14
    max_articles_per_feed = 20

    remove_tags_before = dict(name='h1')

    remove_tags_after = dict(name='div', attrs={'class': 'body-container'})

    remove_tags = [
        dict(name='div', attrs={'class': 'publishing-details '}),
        dict(name='div', attrs={'class': 'separator'}),
        dict(name='div', attrs={'class': 'links'}),
        dict(name='div', attrs={'class': 'share--box'}),
        dict(name='aside'),
        dict(name='div', attrs={'class': 'media-block also-read'}),
        dict(name='div', attrs={'class': 'media-block-wrap'}),
        dict(name='div', attrs={'class': 'media-download'}),
        dict(name='div', attrs={'class': 'wsw__embed'}),
        dict(name='div', attrs={'class': 'share--box'}),
        dict(name='div', attrs={'class': 'prog-hdr'}),
        dict(name='div', attrs={'class': 'dropdown__holder'}),
        dict(name='div', attrs={'id': 'ymla-section'}),
        dict(name='div', attrs={'id': 'comments'}),
        dict(name='a', attrs={'class': 'back-to-top-link'}),
        dict(name='footer'),
        dict(name='li', attrs={'class': 'socials block-socials'}),
        dict(name='div', attrs={'data-sp_api': 'pangea-video'})
    ]

    feeds = [
        (
            'Новости',
            'https://www.currenttime.tv/api/zgbip_e_tpp_'
        ),
        (
            'Семь сорок',
            'https://www.currenttime.tv/api/ztktpyeimupt'
        ),
        (
            'Эксклюзив',
            'https://www.currenttime.tv/api/zpyomoe-rimi'
        ),
        (
            'Выбор редакции',
            'https://www.currenttime.tv/api/zqk-poekpbpo'
        ),
        (
            'Россия',
            'https://www.currenttime.tv/api/zuvmpvepo_pv'
        ),
        (
            'Украина',
            'https://www.currenttime.tv/api/zkvmptemo_pt'
        ),
        (
            'Беларусь',
            'https://www.currenttime.tv/api/zvvmm_eoo_mt'
        ),
        ('Азия', 'https://www.currenttime.tv/api/zbvtpqetoupq'),
        (
            'Европа',
            'https://www.currenttime.tv/api/z-vmpoevo_pi'
        ),
        (
            'Америка',
            'https://www.currenttime.tv/api/zbvmpieto_pp'
        ),
        (
            'Ближний Восток',
            'https://www.currenttime.tv/api/zrvtppeuqupm'
        ),
        (
            'Лонгриды',
            'https://www.currenttime.tv/api/zibmmyejv_my'
        ),
        (
            'Репортаж',
            'https://www.currenttime.tv/api/zrpppqeujppo'
        ),
        (
            'Репортажи программы Вечер',
            'https://www.currenttime.tv/api/zvrrmoeourmp'
        ),
        (
            'Интервью',
            'https://www.currenttime.tv/api/zqpppoekjppi'
        ),
        (
            'Инфографика',
            'https://www.currenttime.tv/api/zmqmpyebumpv'
        )
    ]
