#!/usr/bin/env python
# vim:fileencoding=utf-8

from calibre.web.feeds.news import BasicNewsRecipe


class TakieDela(BasicNewsRecipe):
    title = 'Такие дела'
    __author__ = 'bugmen00t'
    description = 'Издание «Такие дела» освещает социальные проблемы, пишет о проблемах людей с редкими заболеваниями и инвалидностью, о состоянии российской медицины, а также о благотворительности и социальной обстановке в России. Также издание взаимодействует с некоммерческими организациями, собирая истории о благотворительных проектах, и занимается сбором средств (краудфандингом) для фонда «Нужна помощь».'  # noqa
    publisher = 'Благотворительный фонд «Нужна Помощь»'  # noqa
    category = 'blog'
    cover_url = 'https://takiedela.ru/wp-content/themes/takiedela/assets/image/share/td.jpg'
    language = 'ru'
    no_stylesheets = False
    remove_javascript = False
    auto_cleanup = False
    remove_empty_feeds = True
    oldest_article = 30
    max_articles_per_feed = 10

    remove_tags_before = dict(name='header')

    remove_tags_after = dict(name='article')

    remove_tags = [
        dict(
            name='section',
            attrs={
                'class':
                'b-post__materials b-line b-line_p-60 b-line_grey b-line_nomb'
            }
        ),
        dict(
            name='section',
            attrs={
                'class':
                'b-post-material__other b-line b-line_p-60 b-line_bg b-line_nomb'
            }
        ),
        dict(name='div', attrs={'class': 'b-single__case-closed'}),
        dict(name='div', attrs={'class': 'b-line b-total-sum'}),
        dict(
            name='section',
            attrs={
                'class':
                'b-post-material__help b-line b-line_p-60 b-line_grey b-line_nomb'
            }
        ),
        dict(
            name='section',
            attrs={'class': 'b-line b-line_p-60 b-line_bg b-line_nopb b-line_nomb '}
        ),
        dict(name='header', attrs={'class': 'np-header js-np-header'}),
        dict(
            name='div',
            attrs={
                'class':
                'b-post__head-info__block b-post__head-info__block_views in-tablet'
            }
        ),
        dict(
            name='div',
            attrs={'class': 'np-donate-form__bg np-donate-form__bg_border'}
        ),
        dict(name='div', attrs={'class': 'b-photostory-help i-photostory-help'}),
        dict(name='div', attrs={'class': 'mistape_caption'}),
        dict(name='div', attrs={'class': 'b-photostory__inner'}),
        dict(name='div', attrs={'class': 'b-single__extra i-single__extra'}),
        dict(name='div', attrs={'class': 'b-post__help'}),
        dict(name='div', attrs={'class': 'b-post__other b-post__other_right'}),
        dict(name='div', attrs={'class': 'b-soc i-soc b-soc_blog b-soc_noscroll'}),
        dict(
            name='div', attrs={'class': 'np-socials np-socials_grid js-np-socials'}
        ),
        dict(name='ul', attrs={'class': 'b-post__head-tags in-tablet-sm'}),
        dict(name='ul', attrs={'class': 'b-single__text__categories'}),
        dict(name='div', attrs={'class': 'b-donate-info js-donate-info'}),
        dict(name='div', attrs={'class': 'b-404__materials b-line b-line_grey'}),
        dict(name='div', attrs={'class': 'b-404__funds b-line'}),
        dict(name='div', attrs={'class': 'overlay'}),
        dict(name='div', attrs={'class': 'b-help-info-sticky'}),
        dict(name='div', attrs={'id': 'mistape_dialog'}),
        dict(name='footer'),
        dict(name='form', attrs={'id': 'help'}),
        dict(name='form', attrs={'id': 'form-3dsecure'})
    ]

    feeds = [
        (
            'Все материалы',
            'https://takiedela.ru/feed/'
        ),
        (
            'Помогаем',
            'https://takiedela.ru/topics/feed/'
        ),
        (
            'Колонки',
            'https://takiedela.ru/rubrics/columns/feed/'
        ),
        (
            'Объяснения',
            'https://takiedela.ru/rubrics/explanations/feed/'
        ),
        (
            'Фотоистории',
            'https://takiedela.ru/rubrics/photo/feed/'
        ),
        (
            'Портреты',
            'https://takiedela.ru/rubrics/portret/feed/'
        ),
        (
            'Расследования',
            'https://takiedela.ru/rubrics/rassledovaniya/feed/'
        ),
        (
            'Случаи',
            'https://takiedela.ru/genre/cases/feed/'
        ),
        (
            'Контекст',
            'https://takiedela.ru/genre/context/feed/'
        ),
        ('Драмы', 'https://takiedela.ru/genre/drama/feed/'),
        (
            'Герои',
            'https://takiedela.ru/genre/heroes/feed/'
        ),
        (
            'Сохранение наследия и исторической памяти',  # noqa
            'https://takiedela.ru/category/cultural/feed/'
        ),
        (
            'Детство',
            'https://takiedela.ru/category/deti/feed/'
        ),
        (
            'Дети с особенностями развития',  # noqa
            'https://takiedela.ru/category/deti-s-osobennostyami-razvitiya/feed/'
        ),
        (
            'Детский дом',
            'https://takiedela.ru/category/detskiy-dom/feed/'
        ),
        (
            'Катастрофы и стихийные бедствия',  # noqa
            'https://takiedela.ru/category/disaster/feed/'
        ),
        (
            'Хронические и неизлечимые заболевания',  # noqa
            'https://takiedela.ru/category/illness/feed/'
        ),
        (
            'Развитие культуры и искусства',  # noqa
            'https://takiedela.ru/category/kultura/feed/'
        ),
        (
            'Матери и дети',
            'https://takiedela.ru/category/materi-i-deti/feed/'
        ),
        (
            'Медицинская помощь',
            'https://takiedela.ru/category/medical/feed/'
        ),
        (
            'Медицина',
            'https://takiedela.ru/category/medicina/feed/'
        ),
        (
            'ЛГБТ+',
            'https://takiedela.ru/category/minorities/feed/'
        ),
        (
            'Общество',
            'https://takiedela.ru/category/obshhestvo/feed/'
        ),
        (
            'Онкология',
            'https://takiedela.ru/category/onkologiya/feed/'
        ),
        (
            'Сиротство',
            'https://takiedela.ru/category/orphan/feed/'
        ),
        (
            'Другое',
            'https://takiedela.ru/category/other/feed/'
        ),
        (
            'Полиция',
            'https://takiedela.ru/category/policiya/feed/'
        ),
        (
            'Правозащита',
            'https://takiedela.ru/category/pravozashhita/feed/'
        ),
        (
            'Психология',
            'https://takiedela.ru/category/psikhologiya/feed/'
        ),
        (
            'Жертвы насилия',
            'https://takiedela.ru/category/rape/feed/'
        ),
        (
            'Жертвы военных действий',
            'https://takiedela.ru/category/victims-of-war/feed/'
        ),
        (
            'Экология',
            'https://takiedela.ru/category/yekologiya/feed/'
        ),
        (
            'Юридическая помощь',
            'https://takiedela.ru/category/yuridicheskaya-pomoshh/feed/'
        ),
        (
            'Женщины',
            'https://takiedela.ru/category/zhenshhiny/feed/'
        ),
        (
            'Животные',
            'https://takiedela.ru/category/zhivotnye/feed/'
        )
    ]
