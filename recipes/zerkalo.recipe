#!/usr/bin/env python

from calibre.web.feeds.news import BasicNewsRecipe


class Zerkalo(BasicNewsRecipe):
    title = 'Зеркало'
    description = 'Зеркало, проект части бывшей команды TUT.BY.'  # noqa
    __author__ = 'bugmen00t'
    publisher = 'Зеркало (zerkalo.io)'
    publication_type = 'news'
    oldest_article = 7
    max_articles_per_feed = 100
    language = 'ru_BE'
    cover_url = 'https://upload.wikimedia.org/wikipedia/commons/c/c7/Zerkalo.io.png'
    auto_cleanup = False
    no_stylesheets = False

    remove_tags_before = dict(name='h1')

    remove_tags_after = dict(name='div', attrs={'id': 'article_body'})

    remove_tags =   [
        dict(name='div', attrs={'class': 'b-addition m-single m-simplify'}),
        dict(name='div', attrs={'class': 'b-addition m-simplify'}),
        dict(name='iframe'),
        ]

    feeds = [
#
# Original feeds
#
#        ('Новости за день', 'https://news.zerkalo.io/rss/all.rss'),
#       ('Новости недели', 'https://news.zerkalo.io/rss/index.rss'),
#
# Censorship bypass
#
        ('Новости за день', 'https://br0wse-zerkalo.site/news/rss/all.rss'),
        ('Новости недели', 'https://br0wse-zerkalo.site/news/rss/index.rss'),
    ]
