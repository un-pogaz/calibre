#!/usr/bin/env python

from calibre.web.feeds.news import BasicNewsRecipe


class Sotavision(BasicNewsRecipe):
    title = 'SOTA.Vision'
    description = 'Российское независимое общественно-политическое медиа, сфокусированное на освещении нарушения прав человека и политическом преследовании в России.'  # noqa
    __author__ = 'bugmen00t'
    publisher = 'Александра Агеева, Олег Еланчик,  Евгений Доможиров'  # noqa
    publication_type = 'news'
    oldest_article = 7
    max_articles_per_feed = 10
    language = 'ru'
    cover_url = 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/SotaVision.png/600px-SotaVision.png'
    auto_cleanup = False
    no_stylesheets = True

    remove_tags_before = dict(name='h1')

    remove_tags_after = dict(name='span', attrs={'style': 'border-color:#EBEBEB;border-width:1px;width:100%;'})

    remove_tags =   [
        dict(name='div', attrs={'class': 'td_block_wrap tdb_mobile_menu tdi_7 td-pb-border-top td_block_template_1 tdb-header-align'}),
        dict(name='div', attrs={'class': 'td_block_wrap tdb_single_author tdi_52 td-pb-border-top td_block_template_1 tdb-post-meta'}),
        dict(name='div', attrs={'class': 'td_block_wrap tdb_single_date tdi_53 td-pb-border-top td_block_template_1 tdb-post-meta'}),
        dict(name='div', attrs={'class': 'td_block_wrap tdb_single_post_views tdi_54 td-pb-border-top td_block_template_1 tdb-post-meta'}),
        dict(name='div', attrs={'class': 'td_block_wrap tdb_single_post_share tdi_55  td-pb-border-top td_block_template_1'}),
        dict(name='div', attrs={'class': 'td-post-sharing-visible'}),
        ]

    feeds = [
        ('Все материалы', 'https://sotavision.world/feed/'),
        ('Новости', 'https://sotavision.world/category/news/feed/'),
        ('Истории', 'https://sotavision.world/category/stories/feed/'),
        ('Видео', 'https://sotavision.world/category/videos/feed/'),
        ('Фото', 'https://sotavision.world/category/photos/feed/'),
        ('Карточки', 'https://sotavision.world/category/projects/feed/'),
        ('Мнения', 'https://sotavision.world/category/opinions/feed/'),
    ]
